import{d as h,e as y,h as S,i as n,g as P,j as u,k as x,o as v,l as w,b as l,q as A,c as R,a as C,p as o,s as k,z as N}from"./islands-BZEcu5Tg.js";import{u as $,_ as U,a as q}from"./useAuthConfig-Cbw7dd8t.js";import{_}from"./PasswordField.vue_vue_type_script_setup_true_lang-BaWLSgih.js";import{_ as m,a as B}from"./InputLabel.vue_vue_type_script_setup_true_lang-zTz6K1Md.js";import{_ as g}from"./TextInput.vue_vue_type_script_setup_true_lang-Bza2zB90.js";import"./BaseLink.vue_vue_type_script_setup_true_lang-Dv09fmhI.js";import"./BaseInput.vue_vue_type_script_setup_true_lang-DuTyusce.js";const L={class:"mb-3"},I={key:0,class:"mb-3"},M={class:"mb-3"},O={class:"mb-3"},T={class:"d-grid"},j=h({__name:"RegisterPage",setup(D){const s=y(),e=S({username:"",email:"",password:"",repeatPassword:""}),b=n(()=>s.loading),i=n(()=>s.fieldErrors),p=P(!1),c=n(()=>b.value||p.value),f=n(()=>s.authConfigLoaded&&s.authConfig.emailRegistrationRequired);$({loadAuthConfig:()=>s.loadAuthConfig()});const d=r=>{if(s.fieldErrors&&s.fieldErrors[r]){const a={...s.fieldErrors};delete a[r],s.fieldErrors=Object.keys(a).length?a:null}s.error&&(s.error="")},E=()=>{s.resetStatus()};u(()=>e.username,()=>d("username")),u(()=>e.email,()=>d("email")),u(()=>e.password,()=>d("password")),u(()=>e.repeatPassword,()=>d("repeatPassword"));const V=async()=>{if(!c.value){p.value=!0;try{const r={username:e.username,password:e.password,repeatPassword:e.repeatPassword};f.value&&(r.email=e.email),await s.register(r),window.location.assign("/login")}catch{}finally{p.value=!1}}};return(r,a)=>(v(),x(q,{title:"Save N Load",subtitle:"Create your account to get started.","on-reset":E},{default:w(()=>[l("form",{onSubmit:A(V,["prevent"])},[l("div",L,[o(m,{text:"USERNAME"}),o(g,{modelValue:e.username,"onUpdate:modelValue":a[0]||(a[0]=t=>e.username=t),placeholder:"Enter your username",invalid:!!i.value?.username,required:""},null,8,["modelValue","invalid"])]),f.value?(v(),R("div",I,[o(m,{text:"EMAIL"}),o(g,{modelValue:e.email,"onUpdate:modelValue":a[1]||(a[1]=t=>e.email=t),type:"email",placeholder:"Enter your email",invalid:!!i.value?.email,required:""},null,8,["modelValue","invalid"])])):C("",!0),l("div",M,[o(m,{text:"PASSWORD","label-class":"mb-0"}),o(_,{modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=t=>e.password=t),placeholder:"Enter your password",invalid:!!i.value?.password},null,8,["modelValue","invalid"])]),l("div",O,[o(m,{text:"REPEAT PASSWORD","label-class":"mb-0"}),o(_,{modelValue:e.repeatPassword,"onUpdate:modelValue":a[3]||(a[3]=t=>e.repeatPassword=t),placeholder:"Repeat your password",invalid:!!i.value?.repeatPassword},null,8,["modelValue","invalid"])]),l("div",T,[o(B,{type:"submit",variant:"secondary",class:"text-white fw-bold mt-3 py-2",disabled:c.value,loading:c.value},{default:w(()=>[...a[4]||(a[4]=[k(" REGISTER ",-1)])]),_:1},8,["disabled","loading"])]),o(U,{prefix:"Already have an account? ","link-text":"Login",to:"/"})],32)]),_:1}))}});N("register",j);
