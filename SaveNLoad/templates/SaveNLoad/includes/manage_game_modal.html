<div class="modal fade" id="gameManageModal" tabindex="-1" aria-labelledby="gameManageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content bg-primary text-white border-0">
            {% if not is_user %}
            <div class="modal-header bg-primary border-0 d-flex align-items-center">
                <ul class="nav nav-tabs border-0 mb-0" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active text-white d-flex align-items-center" id="edit-tab"
                            data-bs-toggle="tab" data-bs-target="#edit-pane" type="button" role="tab">
                            <i class="fas fa-edit me-2"></i>
                            <span>Edit</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation" id="saves-tab-container">
                        <button class="nav-link text-white-50 d-flex align-items-center" id="saves-tab"
                            data-bs-toggle="tab" data-bs-target="#saves-pane" type="button" role="tab">
                            <i class="fas fa-folder me-2"></i>
                            <span>Available Saves</span>
                        </button>
                    </li>
                </ul>
            </div>
            <div class="modal-body bg-primary" style="max-height: 70vh; overflow-y: auto;">
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="edit-pane" role="tabpanel">
                        <form id="gameManageForm">
                            {% csrf_token %}
                            <input type="hidden" id="manage_game_id" name="game_id">
                            {% include 'SaveNLoad/includes/game_form_fields_modal.html' %}
                        </form>
                    </div>
                    <div class="tab-pane fade" id="saves-pane" role="tabpanel">
                        <div id="savesListContainer">
                            <div class="text-center py-4">
                                <div class="spinner-border text-secondary" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                                <p class="text-white-50 mt-2">Loading saves...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer bg-primary border-secondary d-flex justify-content-end">
                <div id="edit-tab-buttons" class="d-flex gap-2 me-auto">
                    <button type="button" class="btn btn-outline-danger text-white" id="deleteGameBtn">
                        <i class="fas fa-trash-alt me-1"></i>Delete
                    </button>
                    <button type="button" class="btn btn-secondary text-white" id="saveGameBtn">Save changes</button>
                </div>
                <button type="button" class="btn btn-outline-secondary text-white"
                    data-bs-dismiss="modal">Close</button>
            </div>
            {% else %}
            {# User view - show only saves tab #}
            <div class="modal-header bg-primary border-secondary">
                <h5 class="modal-title text-white" id="gameManageModalLabel">Available Saves</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body bg-primary" style="max-height: 70vh; overflow-y: auto;">
                <div id="saves-pane">
                    <div id="savesListContainer">
                        <div class="text-center py-4">
                            <div class="spinner-border text-secondary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="text-white-50 mt-2">Loading saves...</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer bg-primary border-secondary d-flex justify-content-end">
                <button type="button" class="btn btn-outline-secondary text-white"
                    data-bs-dismiss="modal">Close</button>
            </div>
            {% endif %}
        </div>
    </div>
</div>